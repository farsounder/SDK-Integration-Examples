# How to get running on Ubuntu
## Install dependencies

### Install 0MQ
Install [zmq]((https://zeromq.org/download/)(may need to sudo) and g++ (if
not installed already)
```
apt-get update
apt-get install libzmq3-dev g++
```

### Install a protobuf compiler
Install the protobuf compiler:
```
apt-get update (if you didn't run above)
apt-get install protobuf-compiler
```

## Testing configuration
### Test 0MQ setup
Find the zmq library so you can link against it - this changes a bit depending
on the actual linux distro. You can use: `ldconfig -p | grep zmq`

For example on Ubuntu on WSL2 I get:
```
$ ldconfig -p | grep zmq

        libzmq.so.5 (libc6,x86-64) => /lib/x86_64-linux-gnu/libzmq.so.5
        libzmq.so (libc6,x86-64) => /lib/x86_64-linux-gnu/libzmq.so

```
Note the location of libzmq. We need this to link our C++ code against when we
compile.

There is a simple example from the 0MQ docs in:
[/examples/hello_world_zmq](/examples/hello_world_zmq) that sets up a req/reply 
verison of hello world on a tcp port.
Compile each file (sender.cpp and receiver.cpp). For example, terminal 1:
```
g++ sender.cpp -L /usr/lib/x86_64-linux-gnu -lzmq -o sender
```

Terminal 2:
```
g++ receiver.cpp -L /usr/lib/x86_64-linux-gnu -lzmq -o receiver
```

Remember to replace the "x86_64-linux-gnu" dir with whereever your libzmq is
located.

If they both compile and run, your 0MQ install is ready!

### Test protobuf setup
Find the protobuf library so you can link against it - this changes a bit 
depending on the actual linux distro. You can use: `ldconfig -p | grep proto`
to find it. I get the following on WSL2:

```
$ ldconfig -p | grep proto
        libprotoc.so.23 (libc6,x86-64) => /lib/x86_64-linux-gnu/libprotoc.so.23
        libprotobuf.so.23 (libc6,x86-64) => /lib/x86_64-linux-gnu/libprotobuf.so.23
        libprotobuf.so (libc6,x86-64) => /lib/x86_64-linux-gnu/libprotobuf.so
        libprotobuf-lite.so.23 (libc6,x86-64) => /lib/x86_64-linux-gnu/libprotobuf-lite.so.23
        libprotobuf-lite.so (libc6,x86-64) => /lib/x86_64-linux-gnu/libprotobuf-lite.so
```
Note the location for later - in the case above it's `/usr/lib/x86_64-linux-gnu`

Build the tutorial.proto file into C++ files (.cc and .h) using the protobuf-compiler
as:
```
protoc --proto_path . --cpp_out . tutorial.proto
```
Then you can compile and run the examples (write_addresses.cpp and
read_addresses.cpp) using g++:

```
g++ tutorial.pb.cc write_addresses.cpp  -L /usr/lib/x86_64-linux-gnu -lprotobuf -o write
```

and
```
g++ tutorial.pb.cc read_addresses.cpp  -L /usr/lib/x86_64-linux-gnu -lprotobuf -o read
```

If you can build and run these examples, your protobuf set up is good to go!

### SonaSoft Messaging Example
Now that we've confirmed that zmq and protobuf are working, this example will
put them together and show a simple example of how to serialize / deserialize
messages and send them over zermq socks to send and receive data from SonaSoft.

Just like before, we have to build the .proto files into C++ files, the
the `build_protos.sh` will compile them and put the resulting files in the
'autogenerated' directory.


